+++
title = "The Linux Kernel Configuration Guide Part 3"
slug = "the linux kernel configuration guide part 3"
nick = "kernel3"
date = "2017-08-26"
author = "Firas Khalil Khana"
imgsrc = "/img/kernel3.png"
imgalt = "kernel3"
+++
Before starting with the <mark>General setup</mark> section, there's this important option just before it:
<h3>[*] 64-bit kernel</h3>
```none
Symbol:     CONFIG_64BIT

Help:       Say yes to build a 64-bit kernel - formerly known as x86_64
            Say no to build a 32-bit kernel - formerly known as i386

Type:       boolean

Choice:     built-in [*]
```
<hr/>
<h3>1- General setup</h3>
<h3>(ck-patchset Specific Option) [*] MuQSS cpu scheduler</h3>
```none
Symbol:     CONFIG_SCHED_MUQSS

Help:       The Multiple Queue Skiplist Scheduler for excellent interactivity and
            responsiveness on the desktop and highly scalable deterministic
            low latency on any hardware.
  
Type:       boolean

Choice:     built-in [*]

Reason:     Since I'm running Gentoo Linux and on an unstable branch ~amd64, I wanted
            to achieve as much responsiveness and reduce the latency in order to be able
            to use other applications when compiling (especially my seamonkey web browser).
```
<h3>() Cross-compiler tool prefix</h3>
```none
Symbol:     CONFIG_CROSS_COMPILE

Help:       Same as running 'make CROSS_COMPILE=prefix-' but stored for
            default make runs in this kernel build directory.  You don't
            need to set this unless you want the configured kernel build
            directory to select the cross-compiler automatically.

Type:       string

Choice:     excluded ()

Reason:     The kernel will be used directly on my laptop and won't be built for another
            machine.
```
<h3>(-DOTSLASHLINUX) Local version - append to kernel release</h3>
```none
Symbol:     CONFIG_LOCALVERSION

Help:       Append an extra string to the end of your kernel version.
            This will show up when you type uname, for example.
            The string you set here will be appended after the contents of
            any files with a filename matching localversion* in your
            object and source tree, in that order.  Your total string can
            be a maximum of 64 characters.

Type:       string

Choice:     -DOTSLASHLINUX

Reason:     In order not to lose track of the custom kernels I build, I like to append
            extra strings to the end of my kernel's version. You can leave it empty
            if you want.
```
<h3>[ ] Automatically append version information to the version string</h3>
```none
Symbol:     CONFIG_LOCALVERSION_AUTO

Help:       This will try to automatically determine if the current tree is a
            release tree by looking for git tags that belong to the current
            top of tree revision.
            
            A string of the format -gxxxxxxxx will be added to the localversion
            if a git-based tree is found.  The string generated by this will be
            appended after any matching localversion* files, and after the value
            set in CONFIG_LOCALVERSION.

            (The actual string used here is the first eight characters produced
            by running the command:

              $ git rev-parse --verify HEAD

            which is done within the script "scripts/setlocalversion".)

Type:       boolean

Choice:     excluded [ ]

Reason:     CONFIG_LOCALVERSION is enough for me. You can leave this empty
            like I did.
```
<h3>Kernel compression mode (LZ4)</h3>
Make sure you have <mark>app-arch/lz4</mark> installed before compiling your kernel.
```none
Symbol:     CONFIG_KERNEL_LZ4

Help:       LZ4 is an LZ77-type compressor with a fixed, byte-oriented encoding
            A preliminary version of LZ4 de/compression tool is available 
            <https://code.google.com/p/lz4>.
            
            Its compression ratio is worse than LZO. The size of the 
            is about 8% bigger than LZO. But the decompression speed 
            faster than LZO.

Type:       boolean

Choice:     built-in [*]

Reason:     I'm basically against compressing your kernel on setups that 
            use fast storage solutions, but since I'm on a slow 5400rpm HDD.
            Therefore,I had to go with LZ4 compression method as it's decompression
            speed is the fastest, and decompression speed is what matters when 
            measuring boot times.

            In my case using an uncompressed kernel slowed boot time down 
            by 300-500ms, so I had to go with LZ4. If your storage is extremely
            fast then I suggest you use an uncompressed kernel (you can find 
            several patches online for building an uncompressed kernel, I'll be 
            talking about applying patches to the kernel once I'm done with this 
            series, until then you can experiment on your own =D).

            Every other compression method is unset. If you wanted your built 
            kernel to have the smallest size possible then use the XZ compression
            method. Just make sure that you have the proper tools for compression
            to prevent errors from popping up.
```
<h3>(DOTSLASHLINUX) Default hostname</h3>
```none
Symbol:     CONFIG_DEFAULT_HOSTNAME

Help:       This option determines the default system hostname before
            calls sethostname(2). The kernel traditionally uses "(none)" here
            but you may wish to use a different default here to make a 
            system more usable with less configuration.

Type:       string

Choice:     DOTSLASHLINUX

Reason:     Since this kernel is being built for my laptop, I'd prefer if my system's
            default hostname was set here rather than having to call the hostname service
            at boot time.

            You know what they say the less services you have at boot time, the faster your
            system boots.

            Change this value to whatever you want your hostname to be.
```
<h3>[*] Support for paging of anonymous memory (swap)</h3>
```none
Symbol:     CONFIG_SWAP

Help:       This option allows you to choose whether you want to have
            for so called swap devices or swap files in your kernel that
            used to provide more virtual memory than the actual RAM
            in your computer.  If unsure say Y.

Type:       boolean

Choice:     built-in [*]

Reason:     My system has 7.7 GiB of ram and I idle at ~60MiB of ram on dwm so
            basically why use swap? It was until recently that I was forced to
            add swap space after running swapless builds for 2 years now.

            I had 9 jobs running, and was trying to build chromium from source, 
            while browsing the web on my seamonkey web browser. Suddenly my system 
            lagged horribly (I had my customization set to maximum throughput) and
            chromium stopped at about 60% saying it ran out of memory. So yeah I had
            to reinstall gentoo to get my swap space up and running.

            After I learned my lesson the hard way, I'm now convinced that you have to
            have a swap partition on your system. 

            I went with 15.4 GiB of swap space since I tend to open lots of apps when
            compiling (thanks to my highly responsive/minimal latency build I barely
            notice that my system is running 9 jobs building something).
```
<h3>-*- System V IPC</h3>
